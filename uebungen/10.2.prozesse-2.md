# Prozesse - Übung 2

## Übung 7: Ping ausser Rand und Band

Starte das Kommando `ping google.com &`, so dass es im Hintergrund ausgeführt wird. 

Blöderweise siehst du jetzt trotzdem die Meldungen von `ping`, dass `google.com` erreichbar ist, deine Shell wird fortlaufend zugemüllt. Kannst du noch Eingaben machen? Versuche den Prozess nun mit `STRG c` zu beenden. Das klappt aber nicht. Warum nur?

1. Mach dir Gedanken, warum das so ist. Der Prozess ist doch in den Hintergrund geschickt worden, die Meldungen erscheinen aber immer noch (im Vordergrund). Du kannst dir das erklären, wir haben in einem anderen Zusammenhang schon darüber gesprochen. Kleiner Tipp: Denke einmal daran, was generell mit jedem Prozess passiert, der gestartet wird...

2. Versuche nun, diesen Prozess aus einem anderen Terminal heraus zu beenden. 

Dafür musst du mit `kill` ein bestimmtes Signal an diesen Prozess senden. `kill` akzeptiert aber nur PIDs und keine Kommandos als Argument.

- Verwende `ps -ef` um dir alle laufenden Prozesse anzuzeigen, eine Pipe und das Kommando `grep`  um die PID von `ping` zu ermitteln
- Beende nun den Prozess mit `kill` und der Angabe seiner PID
- Hast du jetzt die Kontrolle über deine Shell zurück? 

## Übung 8: Signale mit kill an Prozesse senden
- Informiere dich in der Manpage von `kill`, welches Signal genau in Übung 7 an `ping` gesendet wurde, also welches Signal `kill` standardmässig versendet
- Schau dir einmal die Liste aller Signale mit dem Kommando `kill -l` an. Wichtig sind vielleicht folgende Signale:
  - `1) SIGHUP`
  - `2) SIGINT`
  - `3) SIGQUIT`
  - `9) SIGKILL`
  - `15) SIGTERM`
  - `18) SIGCONT`
  - `19) SIGSTOP`

Starte nun einen neuen Prozess `sleep 666` und schicke ihn in den Hintergrund mit `STRG z`. Prüfe den Status mit `jobs`. Der Prozess ist angehalten. 

1. Versuche nun, diesen Prozess mit dem Kommando `kill` und dem entsprechenden Signal **aus einem anderen Terminal heraus** im Hintergrund wieder auszuführen bzw. fortzusetzen. Prüfe das ganze mit `jobs`.
2. Halte den Prozess nun an. Auch wieder mit `kill` und dem entsprechenden Signal aus dem anderen Terminal heraus
3. Brich den Prozess nun hart ab - töte ihn!
4. Informiere dich über den Unterschied von z.B. `SIGTERM` und `SIGINT` zu `SIGKILL`.
5. Mit `kill` können Signale auf mehrere Arten gesendet werden: Über die Angabe der Signalnummer, des Signalnamens, Langoption, Kurzoption etc. Wie viele verschiedene Möglichkeiten findest du?

## Übung 9: pkill und pgrep
Starte drei `sleep 1000 &` Prozesse im Hintergrund.

Nutze nun das Kommando `pkill`, welchem nicht eine PID, sondern ein Name bzw. Pattern übergeben werden kann. Was passiert, wenn du `pkill sleep` ausführst?

Informiere dich auch über `pgrep`. Wiederhole dazu vielleicht das Beispiel mit `ping` aus Übung 6. Könnte `pgrep` hier nützlich sein? Und vielleicht auch `pkill`?

## Übung 10: Abhängigkeit von Prozessen

Starte in einer Shell ein beliebiges Kommando, welches länger läuft (`ping`, `sleep`). Ermittle dann aus einem anderen Terminal heraus die PID der Shell, in welcher du dieses Kommando gestartet hast. Beende nun den Prozess dieser Shell. 

Was passiert mit dem Kommando, welches darin gestartet wurde? Könnte das in bestimmten Situationen Probleme verursachen? Denke vielleicht mal darüber nach, was passiert, wenn du z.B. über `ssh` ein Upgrade eines System durchführst und dabei die SSH Verbindung abbricht...

Informiere dich in diesem Zusammenhang über das Kommando `nohup` und Terminal Mutliplexer wie `screen`, `tmux`, `zellij` ...

Du könntest mal wieder einen Prozess wie `ping` über `nohup` starten der stellvertretend für einen Prozess steht der lange läuft, wie ein Upgrade, Kopiervorgang oder so. 
```bash
nohup ping google.de &
```
Drücke danach einmal die Enter-Taste um deinen Prompt zurück zu bekommen. Beende nun aus einem anderen Terminal heraus die Shell, in der `ping` gestartet wurde. 

Ist `ping` jetzt auch beendet worden? Suche danach mit `ps` und `grep` oder nutze direkt `pgrep`.

Was kannst du daraus über ein *Best Practice* bezüglich Systemupgrades über SSH schliessen?

## Übung 11: Prozess-Signale und Tastenkombinationen
Bestimmte Tastenkombinationen senden im Endeffekt nur Signale an den momentan aktiven Prozess. 

1. Versuche herauszufinden, welche Signale die Tastenkombinationen `STRG z` und `STRG c` senden.
2. Versuche, anstatt der Tastenkombination das entsprechende Signal mit `kill` an einen Prozess zu senden.
3. Es gibt auch die Tastenkombination `STRG d`. Diese beendet z.B. eine laufende Eingabe. Sendet diese Tastenkombination auch ein Signal?
